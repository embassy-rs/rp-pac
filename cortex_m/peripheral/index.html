<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Core peripherals."><title>cortex_m::peripheral - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="cortex_m" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (b628260df 2023-04-22)" data-search-js="search-618e954b235f6acc.js" data-settings-js="settings-298e1ea74db45b39.js" data-settings-css="settings-7bfb4c59cc6bc502.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../cortex_m/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../cortex_m/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module peripheral</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">cortex_m</a>::<wbr><a class="mod" href="#">peripheral</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/cortex_m/peripheral/mod.rs.html#1-685">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Core peripherals.</p>
<h2 id="api"><a href="#api">API</a></h2>
<p>To use (most of) the peripheral API first you must get an <em>instance</em> of the peripheral. All the
core peripherals are modeled as singletons (there can only ever be, at most, one instance of any
one of them at any given point in time) and the only way to get an instance of them is through
the <a href="struct.Peripherals.html#method.take"><code>Peripherals::take</code></a> method.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span><span class="kw-2">mut </span>peripherals = Peripherals::take().unwrap();
peripherals.DCB.enable_trace();</code></pre></div>
<p>This method can only be successfully called <em>once</em> – this is why the method returns an
<code>Option</code>. Subsequent calls to the method will result in a <code>None</code> value being returned.</p>

<div class="example-wrap should_panic"><a href="#" class="tooltip" title="This example panics">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span>ok = Peripherals::take().unwrap();
<span class="kw">let </span>panics = Peripherals::take().unwrap();</code></pre></div>
<p>A part of the peripheral API doesn’t require access to a peripheral instance. This part of the
API is provided as static methods on the peripheral types. One example is the
<a href="struct.DWT.html#method.cycle_count"><code>DWT::cycle_count</code></a> method.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>{
    <span class="kw">let </span><span class="kw-2">mut </span>peripherals = Peripherals::take().unwrap();
    peripherals.DCB.enable_trace();
    peripherals.DWT.enable_cycle_counter();
} <span class="comment">// all the peripheral singletons are destroyed here

// but this method can be called without a DWT instance
</span><span class="kw">let </span>cyccnt = DWT::cycle_count();</code></pre></div>
<p>The singleton property can be <em>unsafely</em> bypassed using the <code>ptr</code> static method which is
available on all the peripheral types. This method is a useful building block for implementing
safe higher level abstractions.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>{
    <span class="kw">let </span><span class="kw-2">mut </span>peripherals = Peripherals::take().unwrap();
    peripherals.DCB.enable_trace();
    peripherals.DWT.enable_cycle_counter();
} <span class="comment">// all the peripheral singletons are destroyed here

// actually safe because this is an atomic read with no side effects
</span><span class="kw">let </span>cyccnt = <span class="kw">unsafe </span>{ (<span class="kw-2">*</span>DWT::PTR).cyccnt.read() };</code></pre></div>
<h2 id="references"><a href="#references">References</a></h2>
<ul>
<li>ARMv7-M Architecture Reference Manual (Issue E.b) - Chapter B3</li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="cbp/index.html" title="mod cortex_m::peripheral::cbp">cbp</a></div><div class="desc docblock-short">Cache and branch predictor maintenance operations</div></li><li><div class="item-name"><a class="mod" href="cpuid/index.html" title="mod cortex_m::peripheral::cpuid">cpuid</a></div><div class="desc docblock-short">CPUID</div></li><li><div class="item-name"><a class="mod" href="dcb/index.html" title="mod cortex_m::peripheral::dcb">dcb</a></div><div class="desc docblock-short">Debug Control Block</div></li><li><div class="item-name"><a class="mod" href="dwt/index.html" title="mod cortex_m::peripheral::dwt">dwt</a></div><div class="desc docblock-short">Data Watchpoint and Trace unit</div></li><li><div class="item-name"><a class="mod" href="fpb/index.html" title="mod cortex_m::peripheral::fpb">fpb</a></div><div class="desc docblock-short">Flash Patch and Breakpoint unit</div></li><li><div class="item-name"><a class="mod" href="fpu/index.html" title="mod cortex_m::peripheral::fpu">fpu</a></div><div class="desc docblock-short">Floating Point Unit</div></li><li><div class="item-name"><a class="mod" href="icb/index.html" title="mod cortex_m::peripheral::icb">icb</a></div><div class="desc docblock-short">Implementation Control Block</div></li><li><div class="item-name"><a class="mod" href="itm/index.html" title="mod cortex_m::peripheral::itm">itm</a></div><div class="desc docblock-short">Instrumentation Trace Macrocell</div></li><li><div class="item-name"><a class="mod" href="mpu/index.html" title="mod cortex_m::peripheral::mpu">mpu</a></div><div class="desc docblock-short">Memory Protection Unit</div></li><li><div class="item-name"><a class="mod" href="nvic/index.html" title="mod cortex_m::peripheral::nvic">nvic</a></div><div class="desc docblock-short">Nested Vector Interrupt Controller</div></li><li><div class="item-name"><a class="mod" href="scb/index.html" title="mod cortex_m::peripheral::scb">scb</a></div><div class="desc docblock-short">System Control Block</div></li><li><div class="item-name"><a class="mod" href="syst/index.html" title="mod cortex_m::peripheral::syst">syst</a></div><div class="desc docblock-short">SysTick: System Timer</div></li><li><div class="item-name"><a class="mod" href="tpiu/index.html" title="mod cortex_m::peripheral::tpiu">tpiu</a></div><div class="desc docblock-short">Trace Port Interface Unit;</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.CBP.html" title="struct cortex_m::peripheral::CBP">CBP</a></div><div class="desc docblock-short">Cache and branch predictor maintenance operations</div></li><li><div class="item-name"><a class="struct" href="struct.CPUID.html" title="struct cortex_m::peripheral::CPUID">CPUID</a></div><div class="desc docblock-short">CPUID</div></li><li><div class="item-name"><a class="struct" href="struct.DCB.html" title="struct cortex_m::peripheral::DCB">DCB</a></div><div class="desc docblock-short">Debug Control Block</div></li><li><div class="item-name"><a class="struct" href="struct.DWT.html" title="struct cortex_m::peripheral::DWT">DWT</a></div><div class="desc docblock-short">Data Watchpoint and Trace unit</div></li><li><div class="item-name"><a class="struct" href="struct.FPB.html" title="struct cortex_m::peripheral::FPB">FPB</a></div><div class="desc docblock-short">Flash Patch and Breakpoint unit</div></li><li><div class="item-name"><a class="struct" href="struct.FPU.html" title="struct cortex_m::peripheral::FPU">FPU</a></div><div class="desc docblock-short">Floating Point Unit</div></li><li><div class="item-name"><a class="struct" href="struct.ICB.html" title="struct cortex_m::peripheral::ICB">ICB</a></div><div class="desc docblock-short">Implementation Control Block.</div></li><li><div class="item-name"><a class="struct" href="struct.ITM.html" title="struct cortex_m::peripheral::ITM">ITM</a></div><div class="desc docblock-short">Instrumentation Trace Macrocell</div></li><li><div class="item-name"><a class="struct" href="struct.MPU.html" title="struct cortex_m::peripheral::MPU">MPU</a></div><div class="desc docblock-short">Memory Protection Unit</div></li><li><div class="item-name"><a class="struct" href="struct.NVIC.html" title="struct cortex_m::peripheral::NVIC">NVIC</a></div><div class="desc docblock-short">Nested Vector Interrupt Controller</div></li><li><div class="item-name"><a class="struct" href="struct.Peripherals.html" title="struct cortex_m::peripheral::Peripherals">Peripherals</a></div><div class="desc docblock-short">Core peripherals</div></li><li><div class="item-name"><a class="struct" href="struct.SAU.html" title="struct cortex_m::peripheral::SAU">SAU</a></div><div class="desc docblock-short">Security Attribution Unit</div></li><li><div class="item-name"><a class="struct" href="struct.SCB.html" title="struct cortex_m::peripheral::SCB">SCB</a></div><div class="desc docblock-short">System Control Block</div></li><li><div class="item-name"><a class="struct" href="struct.SYST.html" title="struct cortex_m::peripheral::SYST">SYST</a></div><div class="desc docblock-short">SysTick: System Timer</div></li><li><div class="item-name"><a class="struct" href="struct.TPIU.html" title="struct cortex_m::peripheral::TPIU">TPIU</a></div><div class="desc docblock-short">Trace Port Interface Unit</div></li></ul></section></div></main></body></html>